<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Iframe</title>
    <script>
        window.onload = () => {
            console.log("---------- WINDOW LOADED ----------");

            const iframe = document.querySelector("iframe");
                
            const authData = {
                token: "eiAzuNLXXjm7znRBr0NmnhfgrKMkOO",  
                resource_type: "devices",
                resource_id: "17fa5650-d161-4c02-be79-7a4f872ee8c2" // device id
            };

            const t = Date.now()

            // iframe.src = `https://maximus.esper.cloud/login?t=${t}`

            iframe.contentWindow.postMessage(authData, `https://testinit.esper.cloud/login`);
        };
    </script>
</head>
<body style="font-family: 'Helvetica', 'Arial', sans-serif;">
    <h1>Parent Page</h1>
    <hr />
   <div style="display: flex; justify-content: center; width: 100%;">
        <iframe 
            id="myIframe"
            width="90%" 
            height="800px"
            src="https://testinit.esper.cloud/login"
            style="border: 2px solid black;"
        ></iframe>
    </div>
    
</body>
</html>
